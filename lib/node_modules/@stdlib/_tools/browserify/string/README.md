<!--

@license Apache-2.0

Copyright (c) 2018 The Stdlib Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

# Bundle

> Create a bundle from a string using [browserify][browserify].

<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

```javascript
var bundle = require( '@stdlib/_tools/browserify/string' );
```

#### bundle( str, \[dest,] \[options,] clbk )

Generates a bundle from a `string` using [browserify][browserify].

```javascript
var str = 'module.exports = require( "url" );';

bundle( str, clbk );

function clbk( error, bundle ) {
    if ( error ) {
        throw error;
    }
    console.log( bundle.toString() );
}
```

To specify an output file path, provide a `dest` argument.

```javascript
var str = 'module.exports = require( "url" );';

bundle( str, './bundle.js', clbk );

function clbk( error ) {
    if ( error ) {
        throw error;
    }
}
```

The function accepts any [browserify][browserify] `option`, as well as the following `options`:

-   **standalone**: standalone [browserify][browserify] export name. Setting this option instructs the function to generate a UMD bundle with the supplied export name. The generated bundle will work with other module systems. If no module system is found, the export name is attached to the `window` global.
-   **exportName**: bundle export target. The target is the name used to load the bundle from the external environment. In contrast to a standalone UMD bundle, a require function is exposed as a global variable.
-   **requireName**: name of function exposed to support external loading of modules from a [browserify][browserify] bundle.
-   **transforms**: an `array` of [browserify][browserify] transform modules and functions (including corresponding options) to be applied during bundling.
-   **plugins**: an `array` of [browserify][browserify] plugins (including corresponding options) to be applied during bundling.
-   **external**: an `array` of modules to omit when generating a bundle. Omitted modules are assumed to be present in a separate external bundle.

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

## Notes

-   By default, the function sets the `basedir` [browserify][browserify] option to the current working directory. To specify an alternative directory for resolving relative require paths, set `basedir` option.
-   By default, the function sets the `paths` [browserify][browserify] option to include the current working directory and the paths extracted from the `NODE_PATH` environment variable. To specify alternative directories for resolving non-relative require paths, set the `paths` option to specify an `array` of directories for [browserify][browserify] to search.

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

## Examples

<!-- eslint no-undef: "error" -->

```javascript
var bundle = require( '@stdlib/_tools/browserify/string' );

var str = 'module.exports = require( "path" ).join;';

var opts = {
    'exportName': 'beep'
};

bundle( str, opts, clbk );

function clbk( error, bundle ) {
    if ( error ) {
        throw error;
    }
    console.log( bundle.toString() );
}
```

</section>

<!-- /.examples -->

<!-- Section for describing a command-line interface. -->

* * *

<section class="cli">

## CLI

<!-- CLI usage documentation. -->

<section class="usage">

### Usage

```text
Usage: browserify-string [options] [<string>]

Options:

  -h,    --help                Print this message.
  -V,    --version             Print the package version.
         --standalone name     Generate a UMD bundle with the supplied export
                               name. The generated bundle will work with other
                               module systems. If no module system is found, the
                               export name is attached to the `window` global.
         --export-name name    Bundle export target. The target is the name used
                               to load the bundle from the external environment.
                               In contrast to a standalone UMD bundle, a require
                               function is exposed as a global variable.
         --require-name name   External `require` name to support requiring
                               packages within a browserify bundle from the
                               external environment.
  -t,    --transform module    Apply a transform when bundling. To apply
                               multiple transforms, set a --transform flag
                               for each transform.
  -p,    --plugin module       Register a plugin. To register multiple plugins,
                               set a --plugin flag for each plugin.
  -u,    --external module     Omit a module from an output bundle. Omitted
                               modules are assumed to be present in a separate
                               external bundle. To omit multiple modules, set an
                               --external flag for each module to omit.
         --path path           Directory paths in which to search for modules
                               referenced using non-relative paths. To specify
                               multiple directories, set a --path flag for each
                               directory to search.
         --basedir path        Directory from which to resolve relative paths.
                               Default: current working directory.
```

</section>

<!-- /.usage -->

<!-- CLI usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

</section>

<!-- /.notes -->

<!-- CLI usage examples. -->

<section class="examples">

### Examples

```bash
$ browserify-string --export-name beep 'module.exports = require( "path" ).join;'
```

</section>

<!-- /.examples -->

</section>

<!-- /.cli -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for related `stdlib` packages. Do not manually edit this section, as it is automatically populated. -->

<section class="related">

</section>

<!-- /.related -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

[browserify]: https://github.com/substack/node-browserify

</section>

<!-- /.links -->
