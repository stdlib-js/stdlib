/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/

'use strict';

// MODULES //

var dirname = require( 'path' ).dirname;
var resolve = require( 'path' ).resolve;
var cwd = require( '@stdlib/process/cwd' );
var readDir = require( '@stdlib/fs/read-dir' ).sync;


// VARIABLES //

var RTLINTRC = '.rtlintrc';
var workingDir = cwd();


// MAIN //

/**
* Searches for a `.rlintrc` file in the current working directory and all its parent directories.
*
* @private
* @returns {(string|null)} full path of `.rlintrc` or `null` if not found
*/
function findConfigFile() {
	var contents;
	var child;
	var dir;
	var i;

	dir = workingDir;
	do {
		contents = readDir( dir );
		if ( contents instanceof Error ) {
			throw contents;
		}
		for ( i = 0; i < contents.length; i++ ) {
			if ( contents[ i ] === RTLINTRC ) {
				return resolve( dir, contents[ i ] );
			}
		}
		child = dir;

		// Get parent directory:
		dir = dirname( dir );
		if ( dir === child ) {
			return null;
		}
	} while ( true );
}


// EXPORTS //

module.exports = findConfigFile;
