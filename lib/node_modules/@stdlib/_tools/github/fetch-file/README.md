<!--

@license Apache-2.0

Copyright (c) 2021 The Stdlib Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

# Fetch File

> Fetch a file from one or more public GitHub repositories.

<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

```javascript
var fetchFile = require( '@stdlib/_tools/github/fetch-file' );
```

<a name="fetchfile"></a>

#### fetchFile( filepath, repos, clbk )

Fetches a `file` from one or more **public** GitHub repositories.

<!-- run-disable -->

```javascript
// List of repository slugs (username|org/repo):
var repos = [
    'kgryte/utils-copy',
    'dstructs/matrix',
    'math-io/gamma',
    'unknown_user/repo'
];

// Fetch a top-level `README.md` file from each repo:
fetchFile( 'README.md', repos, clbk );

function clbk( error, results ) {
    if ( error ) {
        throw new Error( error.message );
    }
    console.dir( results );
    /* =>
        {
            'meta': {
                'total': 4,
                'success': 3,
                'failure': 1
            },
            'data': {
                'kgryte/utils-copy': '...',
                'dstructs/matrix': '...',
                'math-io/gamma': '...'
            },
            'failures': {
                'unknown_user/repo': 'Not Found'
            }
        }
    */
}
```

#### fetchFile.factory( filepath, repos, clbk )

Creates a reusable `function`.

<!-- run-disable -->

```javascript
var repos = [
    'kgryte/utils-copy',
    'dstructs/matrix',
    'math-io/gamma',
    'unknown_user/repo'
];

var get = fetchFile.factory( 'README.md', repos, clbk );

get();
get();
get();
// ...
```

The factory method accepts the same `arguments` as [`fetchFile()`](#fetchFile).

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

## Notes

-   If the module encounters an application-level `error` (e.g., no network connection, etc), the `error` is returned immediately to the provided `callback`.
-   If the module encounters a downstream `error` (e.g., timeout, reset connection, etc), the `error` is included in the returned results under the `failures` field.

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

## Examples

```javascript
var fetchFile = require( '@stdlib/_tools/github/fetch-file' );

var repos = [
    'kgryte/utils-copy',
    'math-io/gamma',
    'dstructs/matrix'
];

fetchFile( 'README.md', repos, clbk );

function clbk( error, results ) {
    if ( error ) {
        throw new Error( error.message );
    }
    console.dir( results );
}
```

</section>

<!-- /.examples -->

<!-- Section for describing a command-line interface. -->

* * *

<section class="cli">

## CLI

<!-- CLI usage documentation. -->

<section class="usage">

### Usage

```bash
Usage: ghfetchfile [options] file --repo slug1 --repo slug2 ...

Options:

  -h,  --help               Print this message.
  -V,  --version            Print the package version.
       --repo slug          Repository slug; e.g., kgryte/github-fetch-file.
```

</section>

<!-- /.usage -->

<!-- CLI usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

### Notes

-   If a repository file is successfully resolved, the file content is written to `stdout`.
-   If a repository file cannot be resolved due to a downstream `error` (failure), the repo `slug` (and its associated `error`) is written to `sterr`.
-   Output order is **not** guaranteed to match input order.

</section>

<!-- /.notes -->

<!-- CLI usage examples. -->

<section class="examples">

### Examples

<!-- run-disable -->

```bash
$ DEBUG=* ghfetchfile README.md --repo 'kgryte/utils-copy' --repo 'dstructs/matrix' --repo 'math-io/gamma'
# => {...}
```

</section>

<!-- /.examples -->

</section>

<!-- /.cli -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for related `stdlib` packages. Do not manually edit this section, as it is automatically populated. -->

<section class="related">

</section>

<!-- /.related -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

</section>

<!-- /.links -->
