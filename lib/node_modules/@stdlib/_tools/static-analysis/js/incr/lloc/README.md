<!--

@license Apache-2.0

Copyright (c) 2018 The Stdlib Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

# LLOC

> Calculate logical lines of code (LLOC) incrementally.

<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

```javascript
var incrlloc = require( '@stdlib/_tools/static-analysis/js/incr/lloc' );
```

#### incrlloc()

Returns an accumulator `function` for incrementally calculating logical lines of code (LLOC).

```javascript
var accumulator = incrlloc();
```

#### accumulator( \[input] )

If provided an input program, the accumulator function returns an updated logical lines of code (LLOC) statistical summary. If not provided an input program, the accumulator function returns the current LLOC summary state. The input program may be either a `string` or a [`Buffer`][@stdlib/buffer/ctor].

```javascript
var accumulator = incrlloc();

var lloc = accumulator();
// returns {}

lloc = accumulator( 'var x = 5;' );
// returns {...}

lloc = accumulator( 'var y = foo( 3.14 );' );
// returns {...}

lloc = accumulator( 'if ( x < y ) {\n\tconsole.log( "x < y" );\n}\n' );
// returns {...}

lloc = accumulator();
/* e.g., returns
  {
    'count': 3,        // number of programs
    'min': 1,          // minimum LLOC in a program
    'max': 2,          // maximum LLOC in a program
    'range': 1,        // max - min
    'midrange': 1.5,   // (max-min)/2
    'sum': 4,          // total LLOC
    'mean': ~1.33,     // average LLOC per program
    ...
  }
*/
```

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

## Notes

-   **Logical lines of code** (LLOC) is defined as the number of **executable** statements. In comparison to the metric _source lines of code_ (SLOC), calculating LLOC is not sensitive to stylistic forms. In the following example,

    <!-- eslint-disable curly -->

    ```javascript
    var x = -5.0;

    // Shorthand:
    if ( x < 0.0 ) x *= -1;

    // "Verbose":
    if ( x < 0.0 ) {
        x *= -1;
    }
    ```

    the shorthand and "verbose" form both correspond to `2` LLOC (`1` LLOC for the `if` statement and `1` LLOC for the `if` block content).

-   For further details regarding how LLOC is calculated, see [program-summary][@stdlib/_tools/static-analysis/js/program-summary].

-   For each input program, the accumulator function generates a [program summary][@stdlib/_tools/static-analysis/js/program-summary] for that program. Upon generating a [program summary][@stdlib/_tools/static-analysis/js/program-summary], the accumulator extracts LLOC results and updates the accumulator state.

-   If provided a malformed input program, the accumulator will throw an `Error`.

-   Summary statistics are computed via [`incrsummary`][@stdlib/stats/incr/summary].

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

## Examples

<!-- eslint no-undef: "error" -->

```javascript
var incrlloc = require( '@stdlib/_tools/static-analysis/js/incr/lloc' );

// Initialize an accumulator:
var acc = incrlloc();

// Analyze a series of programs:
var prog = 'var x = 5;\n';
acc( prog );

prog = 'var y = "beep";\n';
acc( prog );

prog = 'var z = {\n"foo": "bar"\n};\n';
acc( prog );

prog = 'function add( x, y ) {\n\treturn x + y;\n}\n';
acc( prog );

prog = 'for ( i = 0; i < 5; i++ ) {\n\tconsole.log( i );\n}\n';
acc( prog );

prog = 'if ( x < y ) {\n\tconsole.log( "x < y" );\n} else {\n\tconsole.log( "x >= y" );\n}\n';
acc( prog );

// Print the current state of the accumulator:
console.log( JSON.stringify( acc() ) );
```

</section>

<!-- /.examples -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for related `stdlib` packages. Do not manually edit this section, as it is automatically populated. -->

<section class="related">

</section>

<!-- /.related -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

[@stdlib/buffer/ctor]: https://github.com/stdlib-js/stdlib/tree/develop/lib/node_modules/%40stdlib/buffer/ctor

[@stdlib/_tools/static-analysis/js/program-summary]: https://github.com/stdlib-js/stdlib/tree/develop/lib/node_modules/%40stdlib/_tools/static-analysis/js/program-summary

[@stdlib/stats/incr/summary]: https://github.com/stdlib-js/stdlib/tree/develop/lib/node_modules/%40stdlib/stats/incr/summary

</section>

<!-- /.links -->
