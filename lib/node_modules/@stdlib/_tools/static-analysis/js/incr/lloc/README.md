# LLOC

> Calculate logical lines of code (LLOC) incrementally.

<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

```javascript
var incrlloc = require( '@stdlib/_tools/static-analysis/js/incr/lloc' );
```

#### incrlloc()

Returns an accumulator `function` for incrementally calculating logical lines of code (LLOC).

```javascript
var accumulator = incrlloc();
```

#### accumulator( \[input] )

If provided an input program, the accumulator function returns an updated logical lines of code (LLOC) statistical summary. If not provided an input program, the accumulator function returns the current LLOC summary state. The input program may be either a `string` or a [`Buffer`][@stdlib/buffer/ctor].

```javascript
var lloc = accumulator();
// returns {}

lloc = accumulator( 'var x = 5;' );
// returns {...}

lloc = accumulator( 'var y = foo( 3.14 );' );
// returns {...}

lloc = accumulator( 'if ( x < y ) {\n\tconsole.log( "x < y" );\n}\n' );
// returns {...}

lloc = accumulator();
/* e.g., returns
  {
    "count": 3,
    "min": 1,
    "max": 2,
    "range": 1,
    "midrange": 1.5,
    "sum": 4,
    "mean": ~1.33,
    ...
  }
*/
```

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

## Notes

-   **Logical lines of code** (LLOC) is defined as the number of **executable** statements. In comparison to the metric _source lines of code_ (SLOC), calculating LLOC is not sensitive to stylistic forms. In the following example,

    <!-- eslint-disable curly -->

    ```javascript
    var x = -5.0;

    // Shorthand:
    if ( x < 0.0 ) x *= -1;

    // "Verbose":
    if ( x < 0.0 ) {
        x *= -1;
    }
    ```

    the shorthand and "verbose" form both correspond to `2` LLOC (`1` LLOC for the `if` statement and `1` LLOC for the `if` block content).

-   For further details regarding how LLOC is calculated, see [program-summary][@stdlib/_tools/static-analysis/js/program-summary].

-   For each input program, the accumulator function generates a [program summary][@stdlib/_tools/static-analysis/js/program-summary] for that program. Upon generating a [program summary][@stdlib/_tools/static-analysis/js/program-summary], the accumulator extracts LLOC results and updates the accumulator state.

-   If provided a malformed input program, the accumulator will throw an `Error`.

-   Summary statistics are computed via [`incrsummary`][@stdlib/math/stats/incr/summary].

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

## Examples

```javascript
var incrlloc = require( '@stdlib/_tools/static-analysis/js/incr/lloc' );

var prog;
var acc;

// Initialize an accumulator:
acc = incrlloc();

// Analyze a series of programs:
prog = 'var x = 5;\n';
acc( prog );

prog = 'var y = "beep";\n';
acc( prog );

prog = 'var z = {\n"foo": "bar"\n};\n';
acc( prog );

prog = 'function add( x, y ) {\n\treturn x + y;\n}\n';
acc( prog );

prog = 'for ( i = 0; i < 5; i++ ) {\n\tconsole.log( i );\n}\n';
acc( prog );

prog = 'if ( x < y ) {\n\tconsole.log( "x < y" );\n} else {\n\tconsole.log( "x >= y" );\n}\n';
acc( prog );

// Print the current state of the accumulator:
console.log( JSON.stringify( acc() ) );
```

</section>

<!-- /.examples -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

[@stdlib/buffer/ctor]: https://github.com/stdlib-js/stdlib

[@stdlib/_tools/static-analysis/js/program-summary]: https://github.com/stdlib-js/stdlib

[@stdlib/math/stats/incr/summary]: https://github.com/stdlib-js/stdlib

</section>

<!-- /.links -->
