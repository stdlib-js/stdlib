<!--

@license Apache-2.0

Copyright (c) 2018 The Stdlib Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

# Test Coverage

> [tape][tape] test runner for [Istanbul][istanbul] instrumented source code.

<section class="usage">

## Usage

```javascript
var runner = require( '@stdlib/_tools/test-cov/tape-istanbul' );
```

#### runner( pattern, \[options,] clbk )

Runs [tape][tape] tests for [Istanbul][istanbul] instrumented source code.

```javascript
runner( 'test*.js', done );

function done( error, coverage ) {
    if ( error ) {
        throw error;
    }
    console.log( JSON.stringify( coverage ) );
}
```

The function accepts the following `options`:

-   **global**: global variable containing coverage information. Default: `__coverage__`.
-   **dir**: root directory from which to search for files. May be either a relative or absolute directory path. Relative paths are resolved relative to the current working directory.

By default, the function looks for coverage information in a `__coverage__` global variable. To specify an alternative variable, set the `global` option.

```javascript
var opts = {
    'global': '$$coverage$$'
};

function done( error, coverage ) {
    if ( error ) {
        throw error;
    }
    console.log( JSON.stringify( coverage ) );
}

runner( 'test*.js', opts, done );
```

</section>

<!-- /.usage -->

<section class="examples">

## Examples

<!-- eslint-disable node/no-path-concat -->

<!-- eslint no-undef: "error" -->

```javascript
var runner = require( '@stdlib/_tools/test-cov/tape-istanbul' );

function done( error, coverage ) {
    if ( error ) {
        throw error;
    }
    console.log( JSON.stringify( coverage ) );
}

var pattern = __dirname+'/fixtures/**/test*.js';

var opts = {
    'dir': __dirname
};

runner( pattern, opts, done );
```

</section>

<!-- /.examples -->

* * *

<section class="cli">

## CLI

<section class="usage">

### Usage

```bash
Usage: stdlib-tape-istanbul [options] <pattern>

Options:

  -h,    --help                Print this message.
  -V,    --version             Print the package version.
         --dir dirname         Root directory from which to search.
         --global variable     Global variable containing coverage information.
         --output filepath     Output filepath for coverage information.
```

</section>

<!-- /.usage -->

<section class="examples">

### Examples

```bash
$ stdlib-tape-istanbul 'test*.js'
```

</section>

<!-- /.examples -->

</section>

<!-- /.cli -->

<!-- Section for related `stdlib` packages. Do not manually edit this section, as it is automatically populated. -->

<section class="related">

</section>

<!-- /.related -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

[tape]: https://github.com/substack/tape

[istanbul]: https://github.com/gotwarlost/istanbul

</section>

<!-- /.links -->
