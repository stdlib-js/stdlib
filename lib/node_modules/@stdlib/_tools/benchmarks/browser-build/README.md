<!--

@license Apache-2.0

Copyright (c) 2018 The Stdlib Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

# Build

> Build assets for running benchmarks in a web browser.

<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

```javascript
var build = require( '@stdlib/_tools/benchmarks/browser-build' );
```

#### build( root, output, \[options,] clbk )

Given a `root` directory from which to search for benchmarks and an output directory, build assets for running benchmarks in a web browser.

<!-- eslint-disable stdlib/no-redeclare -->

```javascript
var cwd = require( '@stdlib/process/cwd' );

var root = cwd();
var out = root;

build( root, out, clbk );

function clbk( error, bool ) {
    if ( error ) {
        throw error;
    }
    if ( bool ) {
        console.log( 'Success!' );
    } else {
        console.log( 'No generated assets.' );
    }
}
```

The function accepts the following `options`:

-   **pattern**: glob pattern. Default: `'**/benchmark*.js'`.
-   **bundle**: output bundle filename. Default: `'benchmark_bundle.js'`.
-   **html**: output HTML filename. Default: `'benchmarks.html'`.
-   **mount**: URL path on which to a mount a bundle. Default: `'/'`.
-   **title**: HTML title. Default: `'Benchmarks'`.

To provide an alternative glob pattern, set the `pattern` option.

<!-- eslint-disable stdlib/no-redeclare -->

```javascript
var cwd = require( '@stdlib/process/cwd' );

var root = cwd();
var out = root;

var opts = {
    'pattern': '**/bench.js'
};

build( root, out, opts, clbk );

function clbk( error, bool ) {
    if ( error ) {
        throw error;
    }
    if ( bool ) {
        console.log( 'Success!' );
    } else {
        console.log( 'No generated assets.' );
    }
}
```

To mount a bundle on a URL path, set the `mount`option.

<!-- eslint-disable stdlib/no-redeclare -->

```javascript
var cwd = require( '@stdlib/process/cwd' );

var root = cwd();
var out = root;

var opts = {
    'mount': '/www/public/'
};

build( root, out, opts, clbk );

function clbk( error, bool ) {
    if ( error ) {
        throw error;
    }
    if ( bool ) {
        console.log( 'Success!' );
    } else {
        console.log( 'No generated assets.' );
    }
}
```

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

## Examples

<!-- eslint-disable stdlib/no-redeclare -->

<!-- eslint no-undef: "error" -->

```javascript
var join = require( 'path' ).join;
var resolve = require( 'path' ).resolve;
var mkdirp = require( 'mkdirp' ).sync;
var build = require( '@stdlib/_tools/benchmarks/browser-build' );

var root = join( __dirname, 'fixtures' );
var out = resolve( __dirname, '../build' );

mkdirp( out );

var opts = {
    'pattern': 'index.js',
    'bundle': 'benchmark_bundle.js',
    'html': 'benchmarks.html'
};

build( root, out, opts, clbk );

function clbk( error, bool ) {
    if ( error ) {
        throw error;
    }
    if ( bool ) {
        console.log( 'Success!' );
    } else {
        console.log( 'No generated assets.' );
    }
}
```

</section>

<!-- /.examples -->

<!-- Section for describing a command-line interface. -->

* * *

<section class="cli">

## CLI

<!-- CLI usage documentation. -->

<section class="usage">

### Usage

```bash
Usage: benchmarks-browser-build [options] [dir]

Options:

  -h,    --help                Print this message.
  -V,    --version             Print the package version.
  -o,    --out dir             Output directory.
         --pattern glob        Glob pattern.
         --bundle filename     Output bundle filename.
         --html filename       Output HTML filename.
         --mount path          URL path on which to mount a bundle.
         --title title         HTML title.
```

</section>

<!-- /.usage -->

<!-- CLI usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

### Notes

-   If not provided a root directory, the root directory is the current working directory. 

</section>

<!-- /.notes -->

<!-- CLI usage examples. -->

<section class="examples">

### Examples

```bash
$ mkdir ./build && benchmarks-browser-build --pattern 'index.js' --out=./build ./examples/fixtures
```

</section>

<!-- /.examples -->

</section>

<!-- /.cli -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for related `stdlib` packages. Do not manually edit this section, as it is automatically populated. -->

<section class="related">

</section>

<!-- /.related -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

</section>

<!-- /.links -->
