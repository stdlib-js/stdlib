<!--

@license Apache-2.0

Copyright (c) 2018 The Stdlib Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

# Namespace Table of Contents

> Generate a table of contents for a namespace.

<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

```javascript
var createTOC = require( '@stdlib/_tools/markdown/namespace-toc' );
```

#### createTOC( \[options,] clbk )

Generates a table of contents for a namespace.

```javascript
createTOC( onCreate );

function onCreate( error, res ) {
    if ( error ) {
        throw error;
    }
    // Print the namespace table of contents for the current working directory:
    console.log( res.toc );

    // Print the list of package links:
    console.log( res.links );
}
```

The function accepts the following `options`:

-   **dir**: root directory from which to search for files. May be either an absolute or relative directory path. Default: current working directory.
-   **pattern**: filename pattern. Default: `'*'`.
-   **keywords**: string of comma-separated keywords. Default: `''`.
-   **ignore**: list of glob patterns used to exclude matches.
-   **blacklist**: blacklisted packages. Default: `[]`.

To search from a specific directory, set the `dir` option.

```javascript
var opts = {
    'dir': './'
};

createTOC( opts, onCreate );

function onCreate( error, res ) {
    if ( error ) {
        throw error;
    }
    // String with table of contents of namespace in `dir`:
    console.log( res.toc );

    // Array of package links:
    console.log( res.links );
}
```

To limit the packages included into the table of contents, you may use the `pattern` option.

```javascript
var opts = {
    'pattern': '*'
};

createTOC( opts, onCreate );

function onCreate( error, res ) {
    if ( error ) {
        throw error;
    }
    // String with table of contents for packages in current working directory matching supplied global `pattern`:
    console.log( res.toc );

    // Array of package links:
    console.log( res.links );
}
```

To include or exclude packages with certain `package.json` keywords from the table of contents, set the `keywords` option to a string of comma-separated keywords (preceded by `+` or `-` to indicate inclusion or exclusion).

```javascript
var opts = {
    'keywords': '+tools,-math'
};

createTOC( opts, onCreate );

function onCreate( error, res ) {
    if ( error ) {
        throw error;
    }
    // Table of contents with packages containing "tools" as a keyword in their `package.json` file but not "math":
    console.log( res.toc );

    // Array of package links:
    console.log( res.links );
}
```

To exclude matches, set the `ignore` option.

```javascript
var opts = {
    'ignore': [
        '**/assert/is-**',
        '**/assert/has-**-support'
    ]
};

createTOC( opts, onCreate );

function onCreate( error, res ) {
    if ( error ) {
        throw error;
    }
    // String with table of contents without `is-*` and `has-*-support` assertion packages:
    console.log( res.toc );

    // Array of package links:
    console.log( res.links );
}
```

To exclude a list of packages from table of contents, set the `blacklist` option.

```javascript
var opts = {
    'blacklist': [
        '@stdlib/assert/contains',
        '@stdlib/assert/deep-has-own-property',
        '@stdlib/assert/deep-has-property'
    ]
};

createTOC( opts, onCreate );

function onCreate( error, res ) {
    if ( error ) {
        throw error;
    }
    // Table of contents without blacklisted packages:
    console.log( res.toc );

    // Array of package links:
    console.log( res.links );
}
```

#### createTOC.sync( \[options] )

Synchronously creates a table of contents.

```javascript
var out = createTOC.sync();
// returns {...}
```

The function accepts the same `options` as `createTOC()` above.

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

## Examples

<!-- eslint no-undef: "error" -->

```javascript
var resolve = require( 'path' ).resolve;
var createTOC = require( '@stdlib/_tools/markdown/namespace-toc' );

var opts = {
    'dir': resolve( __dirname, './../../../string' ),
    'pattern': '*'
};

createTOC( opts, onCreate );

function onCreate( error, res ) {
    if ( error ) {
        throw error;
    }
    // String with table of contents:
    console.log( res.toc );

    // Array of package links:
    console.log( res.links );
}
```

</section>

<!-- /.examples -->

* * *

<section class="cli">

## CLI

<!-- CLI usage documentation. -->

<section class="usage">

### Usage

```text
Usage: namespace-toc [options] [<dir>]

Options:

  -h,  --help               Print this message.
  -V,  --version            Print the package version.
       --pattern glob       Glob pattern.
       --ignore glob        Comma-separated list of ignore glob patterns.
       --keywords           Comma-separated list of keywords (preceded by `+` or
                            `-` to indicate inclusion or exclusion).
       --blacklist          Comma-separated list of excluded packages.
```

</section>

<!-- /.usage -->

<!-- CLI usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

</section>

<!-- /.notes -->

<!-- CLI usage examples. -->

<section class="examples">

### Examples

```bash
$ namespace-toc
```

</section>

<!-- /.examples -->

</section>

<!-- /.cli -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for related `stdlib` packages. Do not manually edit this section, as it is automatically populated. -->

<section class="related">

</section>

<!-- /.related -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

</section>

<!-- /.links -->
