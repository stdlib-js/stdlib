/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/

/**
* Header file containing strided array type definitions.
*/
#ifndef STDLIB_STRIDED_COMMON_TYPEDEFS_H
#define STDLIB_STRIDED_COMMON_TYPEDEFS_H

// Note: keep project includes in alphabetical order...
#include "casting.h"
#include "function_object.h"
#include "function_typedefs.h"
#include <stdint.h>

/**
* Determines the input and output data types, based on operands provided to a generic strided array function.
*
* @param obj       strided array function interface
* @param operands  array of strided array "operands"
* @param types     array of "type" numbers corresponding to strided array function signatures
* @param casting   casting mode (as enumerated elsewhere)
* @param out       output array containing pointers to resolved data types for both inputs and outputs
* @return an integer indicating success (`0`), failure (`-1`), or not implemented (`-2`)
*/
typedef int8_t TypeResolutionFcn( struct StridedFunctionObject *obj, uint8_t *operands[], uint8_t *types, enum STDLIB_STRIDED_CASTING casting, uint8_t *out[] );

/**
* Resolves a low-level strided array function and associated function "data", based on an array of input and output data types.
*
* @param obj     strided array function object
* @param dtypes  array containing pointers to resolved data types for both inputs and outputs
* @param fcn     resolved low-level strided array function
* @param data    associated function "data" to be provided to the low-level strided array function upon invocation
* @return an integer indicating success (`0`) or failure (`-1`)
*/
typedef int8_t StridedArrayFcnResolutionFcn( struct StridedFunctionObject *obj, uint8_t *dtypes[], StridedArrayFcn *fcn, void *data[] );

#endif // !STDLIB_STRIDED_COMMON_TYPEDEFS_H
