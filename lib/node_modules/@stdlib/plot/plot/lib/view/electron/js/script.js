'use strict';

// Set the debug mode:
localStorage.debug = process.env.DEBUG;


// MODULES //

var debug = require( 'debug/browser' )( 'plot:view:electron:script' );
var path = require( 'path' );
var readDir = require( '@stdlib/fs/read-dir' );
var extname = require( '@stdlib/utils/extname' );


// VARIABLES //

var DIR = path.join( process.env.PLOT_APP_PATH, 'css' );


// FUNCTIONS //

/**
* Inserts stylesheets.
*
* @private
*/
function stylesheets() {
	var files;
	var link;
	var i;

	debug( 'Stylesheet directory: %s.', DIR );
	files = readDir.sync( DIR );
	for ( i = 0; i < files.length; i++ ) {
		if ( extname( files[i] ) !== '.css' ) {
			continue;
		}
		debug( 'Found a CSS file: %s.', files[i] );

		debug( 'Generating link element...' );
		link = document.createElement( 'link' );
		link.setAttribute( 'rel', 'stylesheet' );
		link.setAttribute( 'href', path.join( DIR, files[i] ) );

		debug( 'Appending link element to the document head...' );
		document.head.appendChild( link );
	}
} // end FUNCTION stylesheets()


// MAIN //

/**
* Main script.
*
* @private
*/
function main() {
	debug( 'Injecting stylesheets into the document...' );
	stylesheets();
} // end FUNTION main()

debug( 'Running main script...' );
main();
