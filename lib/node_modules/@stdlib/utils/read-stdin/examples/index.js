'use strict';

var Buffer = require( '@stdlib/buffer/ctor' );
var stdin = require( './../lib' );

/**
* Callback invoked upon reading data from `stdin`.
*
* @private
* @param {(Error|null)} error - error object
* @param {Buffer} data - `stdin` data
*/
function onRead( error, data ) {
	if ( error ) {
		throw error;
	}
	console.log( data.toString() );
	// => 'beep boop'
}

// Fake not being in a terminal context:
process.stdin.isTTY = false;

// Provide a callback to consume all data from `stdin`:
stdin( onRead );

// Push some data to `stdin`:
process.stdin.push( new Buffer( 'beep' ) );
process.stdin.push( new Buffer( ' ' ) );
process.stdin.push( new Buffer( 'boop' ) );

// End the stream:
process.stdin.push( null );
